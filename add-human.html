<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Meeter - portal dla wszystkich oprócz Amerykanów</title>
        <link rel="stylesheet" href="styles.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
        <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
    </head>
    <body>
        <header>
            Baza danych spotkań
        </header>
        <div class="container">
            <nav class="left-menu">
            </nav>
            <div id="main">
                <form>
                    <h2 class="inputHeader">Imię osoby</h2>
                    <input type="text" id="addedHumanNameInput" placeholder="Imię..."/>
                    
                    <h2 class="inputHeader">Nazwisko osoby</h2>
                    <input type="text" id="addedHumanSurnameInput" placeholder="Nazwisko..."/>
                    
                    <h2 class="inputHeader">Płeć</h2>
                    <input type="radio" name="sex" id="male" value="male">
                    <label for="male">Mężczyzna</label>
                    <input type="radio" name="sex" id="female" value="female">
                    <label for="female">Kobieta</label>
                    
                    <h2 class="inputHeader">Gdzie mieszka?</h2>
                    <input type="text" id="cityInput" placeholder="Miasto..."/>
                    
                    <h2 class="inputHeader">Klika</h2>
                    <div id="cliquesSuggestionsInAddHuman">
                    <input type="text" id="cliqueInput" placeholder="Skąd znasz?" onkeyup="getSuggestedCliques()"/>
                    </div>
                    
                    <h2 class="inputHeader">Link do zdęcia</h2>
                    <input type="text" id="photoInput" placeholder="Wklej link do zdjęcia z Wikipedii"/> <br/><br/><br/>
                    
                    <button>Dodaj osobę!</button>
                    </div>
                
                </form>

            </div>
            <aside class="right-menu">
                <!-- Right menu content goes here -->
            </aside>
        </div>
    </body>
    <script src="createLeftMenu.js" ></script>
    <script src="add-human.js" ></script>
    <script>
        createLeftMenu()
        function setCliqueInputValue(cliqueId) {
            let cliqueInputElement = document.getElementById("cliqueInput")
            cliqueInputElement.setAttribute("value", cliqueId)
        }
        function removeCliquessSuggestions() {
            document.querySelectorAll(".cliqueSuggestion").forEach(clique => clique.remove())
        }
        async function getSuggestedCliques() {
            removeCliquessSuggestions()
            const deliveredSubstring = document.getElementById("cliqueInput").value
            let cliquesSuggestions = document.getElementById("cliquesSuggestionsInAddHuman")
            if (deliveredSubstring.length > 1) {
                console.log(deliveredSubstring)
                const cliqueGetReq = await fetch(`http://localhost:3000/get-cliques-from-subs?cliqueInput=${deliveredSubstring}`)
                let suggestedCliquesJson = await cliqueGetReq.json()
                console.log(suggestedCliquesJson)
                for (let clique of suggestedCliquesJson) {
                    let createdCliqueDiv = document.createElement("div")
                    createdCliqueDiv.setAttribute("class", "cliqueSuggestion")
                    createdCliqueDiv.setAttribute("onclick", clique.id)
                    cliquesSuggestionsInAddHuman.appendChild(createdCliqueDiv)

                    let nameOfCliqueDiv = document.createElement("div")
                    nameOfCliqueDiv.setAttribute("class", "nameOfClique")
                    nameOfCliqueDiv.innerText = clique.name
                    createdCliqueDiv.appendChild(nameOfCliqueDiv)

                    let cliquePhotoElement = document.createElement("div")
                    cliquePhotoElement.setAttribute("class", "photoOfClique")
                    cliquePhotoElement.innerHTML = `<img src=${clique.photoDir} />`
                    createdCliqueDiv.appendChild(cliquePhotoElement)

                }
            }
        }
    </script>
</html>